{"ast":null,"code":"import { escapeUri } from \"@aws-sdk/util-uri-escape\";\nimport { SIGNATURE_HEADER } from \"./constants\";\nexport const getCanonicalQuery = _ref => {\n  let {\n    query = {}\n  } = _ref;\n  const keys = [];\n  const serialized = {};\n  for (const key of Object.keys(query).sort()) {\n    if (key.toLowerCase() === SIGNATURE_HEADER) {\n      continue;\n    }\n    keys.push(key);\n    const value = query[key];\n    if (typeof value === \"string\") {\n      serialized[key] = `${escapeUri(key)}=${escapeUri(value)}`;\n    } else if (Array.isArray(value)) {\n      serialized[key] = value.slice(0).sort().reduce((encoded, value) => encoded.concat([`${escapeUri(key)}=${escapeUri(value)}`]), []).join(\"&\");\n    }\n  }\n  return keys.map(key => serialized[key]).filter(serialized => serialized).join(\"&\");\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}