{"ast":null,"code":"import { HttpRequest } from \"@aws-sdk/protocol-http\";\nconst CONTENT_LENGTH_HEADER = \"content-length\";\nexport function contentLengthMiddleware(bodyLengthChecker) {\n  return next => async args => {\n    const request = args.request;\n    if (HttpRequest.isInstance(request)) {\n      const {\n        body,\n        headers\n      } = request;\n      if (body && Object.keys(headers).map(str => str.toLowerCase()).indexOf(CONTENT_LENGTH_HEADER) === -1) {\n        try {\n          const length = bodyLengthChecker(body);\n          request.headers = {\n            ...request.headers,\n            [CONTENT_LENGTH_HEADER]: String(length)\n          };\n        } catch (error) {}\n      }\n    }\n    return next({\n      ...args,\n      request\n    });\n  };\n}\nexport const contentLengthMiddlewareOptions = {\n  step: \"build\",\n  tags: [\"SET_CONTENT_LENGTH\", \"CONTENT_LENGTH\"],\n  name: \"contentLengthMiddleware\",\n  override: true\n};\nexport const getContentLengthPlugin = options => ({\n  applyToStack: clientStack => {\n    clientStack.add(contentLengthMiddleware(options.bodyLengthChecker), contentLengthMiddlewareOptions);\n  }\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}